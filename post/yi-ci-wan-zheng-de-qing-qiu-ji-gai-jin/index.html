<!doctype html>
<html amp lang="zh-Hans">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="准备阶段
当你通过网线或者是WIFI连接到宿舍路由器时，无论进行何种访问，首当其冲的都是要清楚的知道自己所处的网络位置，因此需要初始化IP地址，默认网关，子网掩码，这决定了最基础的，你在当前局域网内的网络位置
DHCP
发现服务

笔记本A..." />
<link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js">
<link rel="preconnect dns-prefetch" href="https://cdn.jsdelivr.net/" crossorigin>
<script async src="https://cdn.ampproject.org/v0.js"></script>
<title>一次完整的请求及改进 | Zer0kiriN</title>


  

    
        <style amp-custom>
            body {
                width: 100vw;
                display: flex;
                flex-direction: column;
                font-family: 'PT Serif',-apple-system-font,"Helvetica Neue","PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif, serif;
                background: white;
            }
            *:focus{
                outline: none;
            }
            @font-face {
                font-family: 'iconfont';
                src: url('https://cdn.jsdelivr.net/gh/jiansing/gridea-theme-inlineamp/inlineamp/assets/media/fonts/iconfont.eot?20200105#iefix') format('embedded-opentype'),
                    url('https://cdn.jsdelivr.net/gh/jiansing/gridea-theme-inlineamp/inlineamp/assets/media/fonts/iconfont.woff2?20200105') format('woff2'),
                    url('https://cdn.jsdelivr.net/gh/jiansing/gridea-theme-inlineamp/inlineamp/assets/media/fonts/iconfont.woff?20200105') format('woff'),
                    url('https://cdn.jsdelivr.net/gh/jiansing/gridea-theme-inlineamp/inlineamp/assets/media/fonts/iconfont.ttf?20200105') format('truetype'),
                    url('https://cdn.jsdelivr.net/gh/jiansing/gridea-theme-inlineamp/inlineamp/assets/media/fonts/iconfont.svg?20200105#iconfont') format('svg');
            }
            @font-face {
              font-family: 'PT Serif';
              font-style: normal;
              font-weight: 400;
              font-display: swap;
              src: local('PT Serif'), local('PTSerif-Regular'), url('https://cdn.jsdelivr.net/gh/jiansing/gridea-theme-inlineamp/inlineamp/assets/media/fonts/ptserif.woff2') format('woff2');
              unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
            }
            .iconfont {
                font-family: "iconfont";
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            /* CSS reset */
            textarea,
            input[type="password"],
            input[type="text"],
            input[type="url"],
            input[type="email"],
            input[type="submit"]
            {
                -webkit-appearance: none;
                border-radius: 0;
            }
            header {
                width: 100vw;
                background: #000000;
                display: flex;
                justify-content: center;
            }
            .top-container {
                width: 71.4286vw;
                height: 100%;
            }
            .title-menus-area {
                display: flex;
                width: 100%;
                height: 5.8095vw;
                justify-content: space-between;
            }
            .blog-title {
                display: flex;
                font-size: 1.6667vw;
                font-weight: bold;
                color: white;
                margin-top: 1.2857vw;
                white-space: nowrap;
                text-decoration: none;
                line-height: 1.6667vw;
            }
            .tagline {
                display: flex;
                width: 100%;
                flex-direction: column;
                align-items: center;
            }
            .tagline-main {
                color: white;
                font-size: 2.9286vw;
                margin-bottom: 1.6667vw;
                line-height: 2.9286vw;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .tagline-main:after {
                content: '';
                display: flex;
                background: #F6F8FA;
                width: 4.7619vw;
                height: 0.2381vw;
                margin-top: 1.6667vw;
            }
            .tagline-sub {
                color: #8A8A8A;
                font-size: 0.9524vw;
                line-height: 1.6667vw;
                margin-bottom: 3.5119vw;
            }
            .tagline-sub a {
                text-decoration: none;
                color: unset;
            }
            .tagline-sub a:hover {
                color: #004578;
            }
            /* go top button */
            .scrolltop-wrap {
                box-sizing: border-box;
                position: absolute;
                top: 11.6667vw;
                right: -3.9048vw;
                bottom: 0;
            }
            .go-top {
                width: 2.9762vw;
                height: 2.9762vw;
                font-size: 1.1905vw;
                text-decoration: none;
                background: #004578;
                border-radius: 100%;
                color: white;
                justify-content: center;
                align-items: center;
                display: flex;
                cursor: pointer;
                
                position: fixed;
                position: -webkit-sticky;
                position: sticky;
                top: -5.9524vw;
                transform: translateY(100vh);
                overflow: hidden;
            }
            @media only screen and (max-width: 640px){
                .top-container {
                    width: 100%;
                }
                .title-menus-area {
                    padding-top: 4.6667vw;
                    height: auto;
                    position: relative;
                }
                .blog-title { 
                    margin-top: 0;
                    margin-left: 5.3333vw;
                    font-size: 3.7333vw;
                    line-height: 3.7333vw;
                }
                .tagline {
                    margin: 6vw auto 0 auto;
                    width:89.3333vw;
                }
                .tagline-main {
                    font-size: 5.0667vw;
                    line-height: 5.0667vw;
                    margin-bottom: 2vw;
                }
                .tagline-main:after {
                    width: 8.8vw;
                    height: 0.44vw;
                    margin-top: 3.0667vw;
                }
                .tagline-sub {
                    font-size: 2.9333vw;
                    line-height: 5.1333vw;
                }
                .scrolltop-wrap {
                    display: none;      
                }
            }/* top menu */
            .top-menus {
                display: flex;
                padding-right: 1.7619vw;
                padding-top: 1.5833vw;
                height: 0.9524vw;
            }
            .top-menus>nav>ul>li {
                display: flex;
                list-style: none;
                margin-left: 2.393vw;
                margin-bottom: 0.2976vw;
                position: relative;
                height: 1.9644vw;
            }
            .top-menus>nav>ul>li>a{
                color: white;
                font-size: 0.9524vw;
                line-height: 0.9524vw;
                text-decoration: none;
            }
            .top-menus .menu {
                display: flex;
                margin: 0;
                padding: 0;
                white-space: nowrap;
                list-style: none;
                justify-content: flex-end;
                flex-wrap: wrap;
            }
            /* sub menu */
            .top-menus>nav>ul>li.menu-item-has-children>a:after {
                font-family: "iconfont";
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                content: '\e62b';
                margin-left: 0.5952vw;
                font-size: 0.9524vw;
            }
            .top-menus>nav>ul>li:hover a {
                color: #004578;
            }
            .top-menus>nav>ul>li:hover>ul {
                opacity: 1;
                visibility: visible;
                transition: 0.2s all ease;
            }
            .top-menus>nav>ul>li>.sub-menu {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                margin-top:1.9345vw;
                display: flex;
                flex-direction: column;
                background: #2A2A2A;
                border: #4A4A4A 0.0595vw solid;
                padding-top: 0.4167vw;
                padding-bottom: 0.4167vw;
                padding-left: 1.2501vw;
                padding-right: 1.2501vw;
                z-index: 1;
                overflow:hidden;   
                opacity: 0;
                visibility: hidden;
                transition: 0.2s all ease; 
            }
            .top-menus>nav>ul>li>.sub-menu>li {
                list-style:none;
                border-bottom: #4A4A4A 0.0595vw solid;
            }
            .top-menus>nav>ul>li>.sub-menu>li:last-child {
                border-bottom: 0
            }
            .top-menus ul>li>.sub-menu>li>a {
                font-size: 0.8333vw;
                line-height: 0.8333vw;
                color: white;
                text-decoration: none;
                width: 100%;
                min-height: 2.4405vw;
                display: flex;
                align-items: center;
            }
            /* third level menu */
            .top-menus>nav>ul>li>.sub-menu>li ul {
                padding-left: 0.893vw;
            }
            .top-menus>nav>ul>li>.sub-menu>li>ul li {
                list-style:none;
            }
            .top-menus>nav>ul>li>.sub-menu>li ul li a{
                color: rgba(255,255,255,0.4);
                min-height: unset;
                margin-bottom: 0.6548vw;
            }
            .top-menus>nav>ul>li>.sub-menu>li ul li a:before {
                content: '-';
                margin-right: 0.2976vw;
            }
            .top-menus>nav>ul>li>.sub-menu>li a:hover {
                color: #004578;
            }
            #header-menu-button {
                display: none;
            }
            @media only screen and (max-width: 640px){
                /* expand menu */
                #header-menu-button + header .top-menus {
                    display: flex;
                    position: absolute;
                    width: 100%;
                    padding: 0;
                    height: auto;
                    top: 0;
                    z-index: 1;
                    pointer-events: none;
                }
                #header-menu-button:checked + header .top-menus {
                    pointer-events: auto;
                }
                #header-menu-button:checked + header .top-menus nav>ul{
                    padding-left: 4vw;
                    padding-right: 4vw;
                    opacity: 1;
                    visibility: visible;
                    padding-bottom: 16vw;
                }
                #header-menu-button + header .top-menus nav>ul {
                    min-height: 100vh;
                    position:fixed;
                    top: 0;
                    bottom: 0;
                    overflow: scroll;
                    flex-wrap: nowrap;
                    opacity: 0;
                    transition: 0.6s all ease;
                    visibility: hidden;
                    display: flex;
                    width: 100%;
                    flex-direction: column;
                    background: #000000;
                    justify-content: start;
                    padding-top: 0;
                    padding-bottom: 4.1333vw;
                    box-sizing: border-box;
                }
                #header-menu-button + header .top-menus nav>ul>li{
                    margin: 0;
                    height: auto;
                    padding-left: 1.3333vw;
                    padding-right: 1.3333vw;
                    border-bottom: 0.1333vw #4A4A4A solid;
                    flex-direction: column;
                    padding-top: 4.0667vw;
                    padding-bottom: 4.0667vw;
                }
                #header-menu-button + header .top-menus nav>ul>li:first-child>a {
                    padding-top: 0;
                }
                #header-menu-button + header .top-menus nav>ul>li:last-child {
                    border-bottom: none;
                }
                #header-menu-button + header .top-menus nav>ul>li>a {
                    font-size: 3.7333vw;
                    line-height: 3.7333vw;
                }
                .top-menus>nav>ul>li.menu-item-has-children>a:after {
                    display: none;
                }
                ul#menu-top-menu li {
                    display: inline-flex;
                    white-space: normal;
                }
                .top-menus>nav>ul>li>.sub-menu {
                    display: flex;
                    transform: none;
                    position: relative;
                    left: 0;
                    margin-top: 0;
                    margin-bottom: 4vw;
                    background: inherit;
                    border: none;
                    padding: 0;
                    padding-left: 3vw;
                    opacity: 1;
                    visibility: visible;
                }
                .top-menus>nav>ul>li:hover a {
                    color: white;
                }
                .top-menus>nav>ul li a:hover {
                    color: #004578;
                }
                .top-menus>nav>ul>li>.sub-menu>li {
                    border: none;
                    margin-top: 3.7067vw;
                    flex-direction: column;
                }
                .top-menus>nav>ul>li>.sub-menu>li>a:before {
                    content: '-';
                    margin-right: 0.8vw;
                    color: rgba(255,255,255,0.4);
                }
                .top-menus>nav>ul>li>.sub-menu>li ul {
                    padding-left: 3vw;
                }
                .top-menus>nav>ul>li>.sub-menu>li ul li a {
                    margin-bottom: 0;
                    margin-top: 3.7067vw;
                }
                .top-menus ul>li>.sub-menu>li>a {
                    font-size: 3.7333vw;
                    line-height: 3.7333vw;
                    color: rgba(255,255,255,0.4);
                }
                #header-menu-button{
                    display:flex;
                    margin: 0;
                    -webkit-appearance: none;
                    appearance: none;
                    line-height: 3.7333vw;
                    width: 4vw;
                    height: 4vw;
                    z-index: 2;
                    position: absolute;
                    right: 4vw;
                    top: 4vw;
                    border: none;
                    background: transparent;
                }
                /* hide for menu scroll */
                #header-menu-button:checked + header + main {
                    animation: mainhide 2s ease;
                    animation-fill-mode: forwards; 
                    -webkit-animation-fill-mode: forwards; 
                    overflow: hidden;
                }
                @keyframes mainhide {
                    from {
                        max-height: auto;
                    }
                    to {
                        overflow: hidden;
                        max-height: 0;
                    }
                }
                #header-menu-button:checked {
                    position: fixed;
                }
                #header-menu-button:checked:after{
                    display: flex;
                    content: '\e63c';
                    transform: scale(0.7);
                }
                #header-menu-button:after{
                    content: '';  
                    color: white;
                    font-family: "iconfont";
                    font-size: 5.3333vw;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;
                    content: '\e63e';
                }
            }            
            /* body content */
            main {
                width: 71.4286vw;
                display: flex;
                margin: 0 auto;
                justify-content: space-between;
                padding-top: 2.9762vw;
                position: relative;
            }
            .main-container {
                width: 48.2143vw;
            }
            .list-box {
                width: 100%;
                display: flex;
                flex-direction: column;
                margin-bottom: 2.9762vw;
            }
            .title-img {
                width: 48.2143vw;
                height: 17.8571vw;
                position: relative;
            }
            .title-img amp-img.contain img {
                object-fit: cover;
                object-position: top;
                transition: all .5s;
            }
            a.title-img:hover amp-img.contain img {
                object-fit: cover;
                transform: scale(1.08);
                -webkit-transform: scale(1.08);
                -moz-transform: scale(1.08);
            }
            .post-info {
                position: relative;
                padding-left: 1.7857vw;
                padding-top: 1.5119vw;
                padding-right: 1.7857vw;
                padding-bottom: 1.7857vw;
                width: 48.2143vw;
                border: 0.0595vw solid #E6E6E6;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
            }
            .post-cate {
                font-size: 0.9524vw;
                line-height: 1.5476vw;
                color: #004578;
                text-decoration: none;
                margin-right: 0.9644vw;  
                display: flex;
                align-items: center;
            }
            .sticky-tag {
                display: flex;
                align-items: center;  
                color: #004578;
            }
            .post-cate:before,
            .sticky-tag:before {
                display: flex;
                content: '';
                width:0.0595vw;
                min-width: 1px;
                height: 0.6548vw;
                background: #004578; 
                margin-right: 0.9524vw;       
            }
            .post-cate:first-child:before {
                display: none;
            }
            .sticky-tag .sticky-text {
                font-size: 0.9524vw;
                text-transform: uppercase;
            }
            .sticky-tag .sticky-text:before {
                font-family: "iconfont";
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                content: '\e63f';
                font-size: 0.9524vw;
                margin-right: 0.4167vw;
            }
            .post-title {
                font-size: 1.3613vw;
                line-height: 2.381vw;
                margin-top: 0.5952vw;
                margin-bottom: 0;
                width: 39.881vw;
                word-break: break-all;
            }
            .post-title:after {
                display: flex;
                content: '';
                width: 4.1667vw;
                height: 0.2976vw;
                background: #004578;
                margin-top: 0.7321vw;
            }
            .post-title a {
                text-decoration: none;
                color: #000000;
            }
            .post-excerpt {
                margin-top: 1.4286vw;
                margin-bottom: 1.1905vw;
                font-size: 0.9524vw;
                line-height: 1.6667vw;
                color: #8A8A8A;
                display: -webkit-box;
                -webkit-box-orient: vertical;
                -webkit-line-clamp: 3;
                overflow: hidden;
                visibility:visible;
            }
            .flex-box {
                display: flex;
                align-items: center;
            }
            .meta-category {
                flex-wrap: wrap;
                padding-right: 4.1667vw;
            }
            .justify-between {
                justify-content: space-between;
            }
            .read-more {
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 0.8333vw;
                line-height: 0.8333vw;
                text-decoration: none;
                min-width: 9.1667vw;
                min-height: 2.1429vw;
                box-sizing: border-box;
                padding-left: 1.1905vw;
                padding-right: 1.1905vw;
                padding-top: 0.7143vw;
                padding-bottom: 0.7143vw;
                color: #004578;
                border: 0.0595vw #004578 solid;
                transition: all .2s;
                text-transform: uppercase;
            }
            .read-more:hover {
                background: #004578;
                color: white;
            }
            .icon-ml-readmore {
                margin-left: 0.625vw;
                font-size: 1.1905vw;
            }
            .post-meta-box {
                margin-top: 0.7143vw;
                font-size: 0.8333vw;
            }
            .post-meta {
                font-size: 0.8333vw;
                color: #1A1A1A;
                text-decoration: none;
                margin-left: 1.4881vw;
                display: inline-flex;
                align-items: center;
            }
            .icon-mr-postmeta {
                margin-right: 0.5952vw;
                font-size: 1.4881vw;
            }
            .post-meta .icon-like-sp {
                font-size: 1.1905vw;
            }
            .post-meta-box a.edit-link:after {
                content: '';
                display: flex;
                background: #979797;
                margin-left: 1.4881vw;
                width: 0.0595vw;
                height: 0.6548vw;
            }
            .post-publish-date {
                width: 4.1667vw;
                height: 4.7619vw;
                background: #F6F6F7;
                position: absolute;
                right: 1.2501vw;
                top: -0.8333vw;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            .post-publish-date .post-date {
                color: #004578;
                font-size: 1.3095vw;
                line-height: 2.2916vw;
                font-weight: bold;
            }
            .post-publish-date .post-month {
                color: #000000;
                font-size: 0.8333vw;
                line-height: 1.4583vw;
                text-transform: uppercase;
            }
            .list-box:last-child {
                margin-bottom: 2.381vw;
            }
            .pagination .screen-reader-text {
                display: none;
            }
            .nav-links {
                margin-top: 2.9762vw;
                margin-bottom: 2.9762vw;
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
            }
            .nav-links .page-numbers,.nav-links .post-page-numbers {
                min-width: 2.1429vw;
                height: 2.1429vw;
                border: 0.0595vw #004578 solid;
                color: #004578;
                font-size: 1.0714vw;
                line-height: 1.0714vw;
                text-decoration: none;
                display: inline-flex;
                justify-content: center;
                align-items: center;
                margin-left: 0.4762vw;
                margin-right: 0.4762vw;
                margin-bottom: 0.4762vw;
                box-sizing: border-box;
            }
            .nav-links .current, .nav-links a.page-numbers:hover,.nav-links a.post-page-numbers:hover {
                background: #004578;
                color: white;
            }
            .pagination>.nav-links>.dots {
                border: none;
                padding-bottom: 0.5714vw;
            }
            @media only screen and (max-width: 640px){
                /* main body */
                main {
                    width: 100%;
                    flex-direction: column;
                    align-items: center;
                    padding-top: 6.6667vw;
                }
                .main-container {
                    width: 92vw;
                }
                .title-img {
                    width: 92vw;
                    height: 34.1333vw;
                }
                .post-info {
                    width: 92vw;
                    padding: 3.4667vw;
                    border: 0.2667vw solid #E6E6E6;
                }
                .post-publish-date {
                    width: 10.6667vw;
                    height: 12.1333vw;
                    top: -2vw;
                    right: 2.8vw;
                }
                .post-publish-date .post-date {
                    font-size: 3.4667vw;
                    line-height: 6.0667vw;
                }
                .post-publish-date .post-month {
                    font-size: 2.1333vw;
                    line-height: 3.7333vw;
                }
                .post-cate {
                    font-size: 3.4667vw;
                    line-height: 4.8vw;
                    margin-right: 2.2133vw;
                }
                .post-cate:before,
                .sticky-tag:before {
                    width: 0.1333vw;
                    height: 1.8933vw;
                    margin-right: 2.2vw;
                }
                .sticky-tag .sticky-text {
                    font-size: 2.9333vw;
                    line-height: 2.9333vw;
                }
                .sticky-tag .sticky-text:before {
                    font-size: 2.8vw;
                    margin-right: 2vw;
                }
                .post-title {
                    margin-top: 2.5333vw;
                    margin-bottom: 0;
                    font-size: 4.8vw;
                    line-height: 6.6667vw;
                    width: 74.4vw;
                }
                .post-title:after {
                    width: 9.3333vw;
                    height: 0.8vw;
                    margin-top: 2.2667vw;
                }
                .post-excerpt {
                    margin-top:3.3333vw;
                    margin-bottom: 3.3333vw;
                    font-size: 4vw;
                    line-height: 5.6vw;
                }
                .read-more {
                    font-size: 2.4533vw;
                    line-height: 2.4533vw;
                    min-width: 26.4933vw;
                    min-height: 6.1333vw;
                    padding-left: 3.7333vw;
                    padding-right: 3.7333vw;
                    padding-top: 2vw;
                    padding-bottom: 2vw;
                    border: 0.1333vw #004578 solid;
                }
                .icon-ml-readmore {
                    margin-left: 1.3333vw;
                    font-size: 3.3333vw;
                }
                .post-meta {
                    font-size: 2.1333vw;
                    margin-left: 3.2vw;
                }
                .icon-mr-postmeta {
                    margin-right: 1.8667vw;
                    font-size: 3.4667vw;
                }
                .post-meta-box a.edit-link:after {
                    margin-left: 3.2133vw;
                    width: 0.1333vw;
                    height: 1.68vw;
                }
                .post-meta .icon-like-sp {
                    font-size: 2.4vw;
                }
                .list-box {
                    margin-bottom: 5.3333vw;
                }
                .nav-links .page-numbers,.nav-links .post-page-numbers {
                    min-width: 8vw;
                    height: 8vw;
                    border: 0.1333vw #004578 solid;
                    font-size: 4vw;
                    line-height: 4vw;
                    margin-left: 1.7733vw;
                    margin-right: 1.7733vw;
                    margin-bottom: 1.7733vw;
                }
                .pagination>.nav-links>.dots {
                    padding-bottom: 2.6667vw;
                }
                .list-box:last-child {
                    margin-bottom: 5.3333vw;
                }
                .meta-category {
                    flex-wrap: wrap;
                    padding-right: 10.6667vw;
                }
            }  
            .sidebar {
                width: 19.6429vw;
                min-height: 29.7619vw;
            }
            .sidebar>aside:first-child {
                margin-top: 0;
            }
            .widget {
                width: 100%;
            }
            .widget-title {
                color: black;
                font-size: 1.0714vw;
                line-height: 1.0714vw;
                margin-top: 0;
                margin-bottom: 1.6667vw;
                text-transform: uppercase;
            }
            .widget-title:after {
                display: flex;
                margin-top: 1.1131vw;
                content: '';
                width: 3.7501vw;
                height: 0.119vw;
                min-height: 1.5px;
                background: #DEDEDE;
            }
            .widget {
                border-bottom: 0.0595vw #EBEBEB solid;
                padding-bottom: 2.1429vw;
                margin-bottom: 2.9762vw;
            }
            .widget:last-child {
                margin-bottom: 0;
                border-bottom: none;
            }
            .widget>ul {
                overflow-wrap: break-word;
                margin: 0;
                padding-left: 0;
                
            }
            .widget_categories>ul>li>ul.children>li.cat-item {
                color: black;
                font-size: 0.9524vw;
                margin-top: 1.1905vw;
            }
            .widget_categories>ul>li>ul.children>li.cat-item ul.children li {
                color: black;
                font-size: 0.9524vw;
                margin-top: 0.9524vw;
            }
            .widget_categories>ul>li.cat-item:before {
                content: '\e641';
                font-family: "iconfont";
                color: #004578;
                font-size: 0.9524vw;
                margin-right: 0.7143vw;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            .widget_categories>ul>li>ul.children {
                padding-left: 1.4286vw;
            }
            .widget_categories>ul>li>ul.children>li>ul.children {
                padding-left: 2.619vw;
            }
            .widget_categories>ul>li>ul.children>li>ul.children>li ul {
                padding-left: 1.3095vw;
            }
            .widget_categories ul.children {
                padding-left: 0.2976vw;
                display: flex;
                flex-direction: column;
            }
            .widget_categories>ul>li>ul.children>li:before {
                content: "\e642";
                display: inline-flex;
                font-family: "iconfont";
                color: #004578;
                font-size: 0.9524vw;
                margin-right: 0.5952vw;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            .widget_categories li.cat-item a {
                color: black;
                text-decoration: none;
            }
            .widget_categories ul{
                list-style: none;
            }
            .widget_categories .screen-reader-text {
                display: none;
            }
            /* common widgets */
            .widget ul li{
                font-size: 0.9524vw;
                line-height: 1.5476vw;
                margin-top: 1.25vw;
                list-style: none;
                position: relative;
                padding-left: 1.6667vw;
            }
            .widget ul li:first-child {
                margin-top: 0;
            }
            .widget ul li a {
                color: black;
                text-decoration: none;
            }
            .widget ul li a:hover {
                color: #004578;
            }
            .widget>ul>li:before {
                content: '\e62d';
                font-family: "iconfont";
                color: #004578;
                font-size: 0.893vw;
                margin-right: 0.7143vw;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                position: absolute;
                left: 0;
            }
            .widget .screen-reader-text {
                display: none;
            }
            /* search widgets */
            .widget_search form {
                display: flex;
                position: relative;
                align-items: center;
            }
            .widget_search {
                border-bottom: none;
                padding-bottom: 0;
            }
            .widget_search form input[type='text'] {
                width: 19.5833vw;
                height: 2.6787vw;
                border: 0.0595vw #E6E6E6 solid;
                border-radius: 0.2381vw;
                padding-left: 1.1905vw;
                padding-right: 2.9762vw;
                font-size: 0.8333vw;
            }
            .widget_search form input[type='text']::placeholder {
                font-size: 0.8333vw;
                color: #8A8A8A;
            }
            .widget_search form button[type='submit'] {
                position: absolute;
                right: 0;
                padding: 0;
                border: none;
                background: unset;
                z-index: 1;
                cursor:pointer;
            }
            .widget_search form button[type='submit']:before {
                content: '\e62c';
                font-family: "iconfont";
                color: #B0B0B0;
                font-size: 1.7857vw;
                margin-right: 0.7143vw;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            /* profile widgets */
            .widget_profile {
                padding-bottom: 0;
                border-bottom: 0;
            }
            .widget_profile .profile-box {
                width:19.6429vw;
                min-height:9.2262vw;
                border:0.0595vw #E6E6E6 solid;
                display: flex;
                justify-content: center;
                position: relative;
                margin-top: 2.6787vw;
            }
            .widget_profile .profile-avatar {
                width: 5.3571vw;
                height: 5.3571vw;
                position: absolute;
                top: -2.6787vw;
            }
            .widget_profile .profile-avatar img {
                border-radius: 100%;
            }
            .widget_profile .profile-content {
                font-size: 0.9524vw;
                padding: 2.9762vw 1.6667vw 1.9048vw 1.6667vw;
                width: 100%;
                box-sizing: border-box;
                word-break: break-word;
                line-height: 1.8;
            }
            .widget_profile .profile-content li {
                margin-top: 0.5952vw;
            }
            .widget_profile  ol, .widget_profile ul {
                padding-left: 0.9524vw;
                margin-top: 0.5952vw;
                margin-bottom: 0.5952vw;
            }
            .widget_profile  .profile-content p {
                margin-block-start: auto;
                margin-block-end: auto;
                margin-top: 0.5952vw;
            }
            .widget_profile img {
                max-width: 100%;
                height: auto;
            }
            .widget_profile .wp-video, .widget_profile .wp-video video{
                max-width: 100%;
                height: auto;
            }
            .widget_profile a {
                font-size: 0.9524vw;
                color: #004578;
                text-decoration: none;
            }
            .widget ul li span, .widget ul li a {
                color: black;
            }
            .widget ul li span.post-date {
                color: #888888;
                font-style: italic;
            }
            li.recentcomments {
                color: #888888;
            }
            @media only screen and (max-width: 640px){
                /* side bar */
                .sidebar {
                    width: 92vw;
                    margin-top: 8vw;
                }
                .widget_profile .profile-box {
                    width: 92vw;
                    margin-top: 12.5333vw;
                    border: 0.2667vw #E6E6E6 solid;
                }
                .widget_profile .profile-avatar {
                    width: 25.0667vw;
                    height: 25.0667vw;
                    top: -12.5333vw;
                }
                .widget_profile .profile-content{
                    font-size: 4vw;
                    line-height: 5.8667vw;
                    padding: 17.8667vw 8.0667vw 4.8267vw 8.0667vw;
                }
                .widget_profile .profile-content li {
                    font-size: 4vw;
                    line-height: 5.8667vw;
                    margin-top: 1.3333vw;
                    list-style: unset;
                }
                .widget_profile  ol, .widget_profile ul {
                    padding-left: 2.1333vw;
                    margin-top: 1.3333vw;
                    margin-bottom: 1.3333vw;
                }
                .widget_profile  .profile-content p {
                    margin-block-start: auto;
                    margin-block-end: auto;
                    margin-top: 1.3333vw;
                }
                .widget_profile img {
                    max-width: 100%;
                    height: auto;
                }
                .widget_profile a {
                    font-size: 4vw;
                    color: #004578;
                    text-decoration: none;
                }
                .widget_search {
                    margin-top: 8vw;
                    margin-bottom: 8vw;
                }
                .widget_search form input[type='text'] {
                    width: 92vw;
                    height: 10.6667vw;
                    border: 0.2667vw #E6E6E6 solid;
                    border-radius: 0.5333vw;
                    padding-left: 5.3333vw;
                    padding-right: 6.6667vw;
                    font-size: 4vw;
                }
                .widget_search form input[type='text']::placeholder {
                    font-size: 4vw;
                }
                .widget_search form button[type='submit']:before {
                    font-size: 6.4vw;
                    margin-right: 4.1333vw;
                }
                .widget {
                    border-bottom: 0.2667vw #EBEBEB solid;
                    padding-bottom: 8.0667vw;
                    margin-bottom: 8.0667vw;
                }
                .widget_search,.widget_profile {
                    border-bottom: none;
                    padding-bottom: 0;
                }
                .widget:last-child {
                    margin-bottom: 0;
                    border-bottom: none;
                }
                .widget-title {
                    font-size: 4.5333vw;
                    line-height: 4.5333vw;
                    margin-bottom: 7.4133vw;
                }
                .widget-title:after {
                    margin-top: 4.5067vw;
                    width: 15.2133vw;
                    height: 0.48vw;
                }
                .widget_categories>ul>li.cat-item:before {
                    font-size: 3.6vw;
                    margin-right: 2.8933vw;
                }
                .widget ul li {
                    font-size: 4vw;
                    line-height: 6.6667vw;
                    margin-top: 4vw;
                    padding-left: 6.6667vw;
                }
                .widget_categories>ul>li>ul.children {
                    padding-left: 3.7333vw;
                }
                .widget_categories>ul>li>ul.children>li:before {
                    font-size: 4vw;
                    margin-right: 1.3333vw;
                }
                .widget_categories>ul>li>ul.children>li.cat-item {
                    font-size: 3.3333vw;
                    margin-top:2.6667vw;
                }
                .widget_categories>ul>li>ul.children>li>ul.children {
                    padding-left: 6.6667vw;
                }
                .widget_categories>ul>li>ul.children>li.cat-item ul.children li {
                    font-size: 3.3333vw;
                    margin-top:2.6667vw;
                }
                .widget>ul>li:before {
                    font-size: 3.6vw;
                    margin-right: 2.5333vw;
                }
            }  
            /* common bottom */
            footer {
                width: 100vw;
                background: #000000;
                display: flex;
                justify-content: center;
            }
            .footer-container {
                width: 71.4286vw;
                height: 100%;
                display: flex;
                justify-content: center;
                flex-direction: column;
            }
            .footer-container .footer-copyright {
                margin-bottom: 1.1905vw;
                margin-top: 2.893vw;
            }
            .footer-container .footer-copyright, .footer-container .footer-copyright a{
                text-align: center;
                font-size: 0.8333vw;
                color: #8A8A8A;
                line-height: 0.5952vw;
                text-decoration: none;
            }
            .footer-menus>nav {
                margin-top: 2.893vw;
                margin-bottom: 0.875vw;
            }
            .footer-menus>nav>ul {
                display: flex;
                margin-top: 0;
                margin-bottom: 0;
                display: flex;
                justify-content: center;
            }
            .footer-menus>nav>ul>li {
                font-size: 1.0714vw;
                line-height: 1.0714vw;
                text-transform: uppercase;
                display: flex;
                flex-direction: column;
            }
            .footer-menus>nav>ul>li>a:after {
                display: flex;
                content: '';
                margin-top: 0.7798vw;
                width: 2.381vw;
                height: 0.119vw;
                background: #444444;
            }
            .footer-menus>nav>ul>li>a {
                color: #004578;
            }
            .footer-menus>nav a {
                text-decoration: none;
                font-size: 1.0714vw;
            }
            .footer-menus>nav ul, .footer-menus>nav li {
                list-style: none;
                justify-content: space-around;
                justify-content: space-evenly;
                display: flex;
                padding-left: 0;
            }
            .footer-menus>nav>ul>li .sub-menu {
                display: flex;
                flex-direction: column;
                text-transform: none;
            }
            .footer-menus>nav>ul>li ul li {
                margin-top: 1.2143vw;
                line-height: 0.9524vw;
                display: flex;
                justify-content: start;
            }
            .footer-container a:hover {
                color:#004578;
            }
            .footer-menus>nav>ul>li ul li:first-child {
                margin-top: 0.893vw;
            }
            .footer-menus>nav>ul>li ul li a{
                font-size: 0.9524vw;
                color: rgba(255,255,255,0.6);
                display: flex;
            }
            @media only screen and (max-width: 640px){
                /* footer */
                .footer-container {
                    width: 100%;
                    padding-top: 8.1333vw;
                    padding-bottom: 5.3333vw;
                }
                .footer-menus>nav>ul>li {
                    font-size: 3.7333vw;
                    line-height: 3.7333vw;
                    margin-bottom: 13.3333vw;
                    min-width: 33.4667vw;
                    margin-left: 4vw;
                    margin-right: 4vw
                }
                .footer-menus>nav a {
                    font-size: 3.7333vw;
                }
                .footer-menus>nav>ul>li>a:after {
                    margin-top: 2.8vw;
                    width: 8.5467vw;
                    height: 0.4267vw;
                }
                .footer-menus>nav>ul>li ul li:first-child {
                    margin-top: 3.1733vw;
                }
                .footer-menus>nav>ul>li ul li {
                    margin-top: 4.3067vw;
                    font-size: 3.4667vw;
                    line-height: 3.4667vw;
                }
                .footer-menus>nav>ul>li ul li a {
                    font-size: 3.4667vw;
                }
                .footer-menus>nav>ul {
                    flex-wrap: wrap;
                    justify-content: space-between;
                    box-sizing: border-box;
                    padding: 0 8.5334vw 0 8.5334vw;
                }
                .footer-menus>nav {
                    margin: 0;
                }
                .footer-container .footer-copyright, .footer-container .footer-copyright a {
                    font-size: 2.9333vw;
                    line-height: 2.9333vw;
                }
                .footer-container .footer-copyright p {
                    margin-top: 0;
                }
                .footer-container .footer-copyright {
                    margin-top: 0;
                    margin-bottom: 0;
                }
            }
                .content {
                    word-break: break-word;
                }
                .content * {
                    max-width: 100%;
                }
                hr {
                    border: none;
                    background: #e6e6e6;
                    width: 100%;
                    height: 0.0595vw;
                    margin-top: 2.381vw;
                    margin-bottom: 2.381vw;
                }
                .post-password-form>p>label>input {
                    margin-left: 0.893vw;
                    margin-right: 0.8333vw;
                    width: 19.0476vw;
                    height: 2.381vw;
                    border-radius: 0.2381vw;
                    border: 0.0595vw #E6E6E6 solid;
                    padding-left: 1.1905vw;
                    padding-right: 1.1905vw;
                    vertical-align: middle
                } 
                .post-password-form>p>input {
                    font-size: 0.9524vw;
                    color: white;
                    background: #464646;
                    border-radius: 0.2381vw;
                    padding: 0.8452vw 1.131vw 0.8452vw 1.131vw;
                    border: none;
                }
                .content figure{
                    margin: 0;
                }
                h2.article-title {
                    margin-top: 1.3095vw;
                    font-size: 1.9048vw;
                    line-height: 2.8571vw;
                    margin-bottom: 1.9048vw;
                }
                h2.article-title a {
                    color: black;
                    text-decoration: none;
                }
                .article-info .post-meta-box {
                    margin-top: 0;
                }
                .article-info .post-meta-box a.edit-link:after {
                    display: none;
                }
                .article-info .post-meta-box a.edit-link:before {
                    content: '';
                    display: flex;
                    background: #979797;
                    margin-right: 1.4881vw;
                    width: 0.0595vw;
                    height: 0.6548vw;
                }
                .article-info .post-meta:first-child {
                    margin-left: 0;
                }
                .article-info .post-meta-box {
                    margin-bottom: 0.9524vw;
                }
                .content blockquote {
                    margin-left:0;
                    margin-right:0;
                    margin-top: 1.4286vw;
                    margin-bottom: 1.4286vw;
                    position: relative;
                    padding-left: 3.5714vw;
                }
                .content blockquote p {
                    margin: 0;
                    font-size: 1.3095vw;
                    line-height: 1.9048vw;
                    color: black;
                }
                .content blockquote:before {
                    content: '\e648';
                    font-family: "iconfont";
                    color: #E6E6E6;
                    font-size: 2.1072vw;
                    margin-right: 1.6667vw;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;
                    position: absolute;
                    left: 0;
                }
                .content h1,
                .content h2,
                .content h3,
                .content h4,
                .content h5,
                .content h6 {
                    margin-top: 1.7857vw;
                    margin-bottom: 1.7857vw;
                }
                .content h1 {
                    font-size: 1.6667vw;
                }
                .content h2 {
                    font-size: 1.5476vw;
                }
                .content h3 {
                    font-size: 1.4286vw;
                }
                .content h4 {
                    font-size: 1.3095vw;
                }
                .content h5 {
                    font-size: 1.1905vw;
                }
                .content h6 {
                    font-size: 1.0714vw;
                }  
                .content p {
                    margin-top: 2.0238vw;
                    margin-bottom: 2.0238vw;
                    font-size: 1.0714vw;
                    line-height: 1.9048vw;
                    color: #666666;
                    display: flex;
                } 
                .content .aligncenter {
                margin-left: auto;
                margin-right: auto;
                }
                .content>figure {
                    margin: 2.0238vw 0 2.0238vw 0;
                }
                
                .blocks-gallery-item figure img{
                    display: flex;
                }
                .content ul, .content ol {
                    padding-left: 1.4881vw;
                    font-size: 1.0714vw;
                    line-height: 1.9048vw;
                    margin-top: 2.0238vw;  
                    margin-bottom: 2.0238vw;  
                }
                .content figcaption {
                    font-size: 1.1905vw;
                    color: #666666;
                    text-align: center;
                    margin-top: 0.2976vw;
                }
                .wp-block-cover {
                    margin: 2.0238vw 0 2.0238vw 0;
                }
                .wp-block-cover-image, .wp-block-cover {
                    position: relative;
                    background-color: #000;
                    background-size: cover;
                    background-position: center center;
                    min-height: 25.5952vw;
                    height: 100%;
                    width: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    overflow: hidden;
                }
                .wp-block-cover-image.has-background-dim::before, 
                .wp-block-cover.has-background-dim::before {
                    content: "";
                    position: absolute;
                    top: 0;
                    left: 0;
                    bottom: 0;
                    right: 0;
                    background-color: inherit;
                    opacity: 0.5;
                    z-index: 1;
                }
                .wp-block-cover .wp-block-cover__inner-container p {
                    margin: 0;
                    text-align: center;
                }
                .wp-block-cover-image .wp-block-cover__inner-container, .wp-block-cover .wp-block-cover__inner-container {
                    z-index: 1;
                    color: #f8f9f9;
                }
                .wp-block-cover__inner-containe,.wp-block-cover__inner-container p {
                    color:white;
                    font-size:1.7857vw;
                }
                figure.wp-block-gallery ul{
                    list-style: none;
                    padding: 0;
                    margin: 0;
                    max-width: 100%;
                    display: flex;
                    justify-content: space-between;
                }
                li.blocks-gallery-item {
                    max-width: 100%;
                }
                .wp-block-gallery ul li figure {
                    margin: 0;
                    position: relative;
                }
                .wp-block-gallery ul li figure>figcaption {
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    font-size: 1.1905vw;
                    line-height: 1.7857vw;
                    padding-top: 1.3542%;
                    padding-bottom: 1.0417%;
                    margin: 0;
                    color: white;
                    background: linear-gradient(to top, rgba(13,13,13,0.85), transparent);
                }
                .wp-block-gallery, .blocks-gallery-grid {
                    display: flex;
                    flex-wrap: wrap;
                    list-style-type: none;
                    padding: 0;
                    margin: 0;
                }
                .wp-block-gallery ul>li {
                    margin-bottom: 0.9524vw;
                }
                
                .wp-block-gallery ul>li:first-child:last-child
                {
                    width: 100%;
                }
                .wp-block-gallery ul>li:first-child:nth-last-child(n+2),
                .wp-block-gallery ul>li:first-child:nth-last-child(n+2) ~ li
                {
                    width: calc((100% - 3%) / 2);
                }
                .wp-block-gallery ul>li:first-child:nth-last-child(3n),
                .wp-block-gallery ul>li:first-child:nth-last-child(3n) ~ li
                {
                    width: calc((100% - 3%) / 3);
                }
                .wp-block-file {
                    background: #F6F6F7;
                    padding-left: 1.4881vw;
                    padding-right: 1.0119vw;
                    padding-top: 1.0714vw;
                    padding-bottom: 1.0714vw;
                    margin: 2.0238vw 0 2.0238vw 0;
                    font-size: 0.9524vw;
                    line-height: 2.381vw;
                }
                .wp-block-file:before {
                    content: 'Download:';
                    color: black;
                    margin-right: 0.5952vw;
                }
                .wp-block-file a:last-child,
                a.wp-block-file__button {
                    float: right;
                    display:flex;
                    padding: 0.7143vw 1.131vw 0.7143vw 1.131vw;
                    border: 0.0595vw #004578 solid;
                    line-height: 0.7619vw;
                }
                .wp-block-file a:last-child:hover,
                a.wp-block-file__button:hover {
                    background: #004578;
                    color: white;
                }
                .wp-block-file a:last-child:after,
                a.wp-block-file__button:after {
                    content: '\e645';
                    font-family: "iconfont";
                    font-size: 0.9524vw;
                    margin-left: 0.8333vw;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;
                }
                .content a {
                    color: #004578;
                    text-decoration: none;
                }
                .content .wp-block-code {
                    width: 100%;
                    background: #F6F6F7;
                    padding: 0.9524vw;
                    font-size: 1.1905vw;
                    line-height: 1.7857vw;
                    color: #666666;
                    box-sizing: border-box;
                }
                .wp-block-table table {
                    width: 100%;
                    border-collapse: collapse;
                    font-size: 1.1905vw;
                }
                .wp-block-table table td {
                    color: #666666;
                    border: 0.0595vw #cccccc solid;
                    padding: 0.4762vw;
                }
                .wp-block-button {
                    margin: 2.0238vw 0 2.0238vw 0;
                }
                .wp-block-button a {
                    text-decoration: underline;
                }
                .wp-block-media-text {
                    display: flex;
                    margin: 2.0238vw 0 2.0238vw 0;
                }
                .wp-block-media-text figure {
                    width: 50%;
                    margin: 0;
                }
                .wp-block-media-text .wp-block-media-text__content {
                    margin-left: 0.893vw;
                }
                
                .wp-block-column {
                    flex-grow: 1;
                    min-width: 0;
                    word-break: break-word;
                    overflow-wrap: break-word;
                }
                .wp-block-columns {
                    flex-wrap: nowrap;
                    display: flex;
                }
                .likes-form {
                    text-align: center;
                    margin-bottom: 3.5714vw;
                }
                .likes-button {
                    width: 4.7619vw;
                    height: 4.7619vw;
                    border-radius: 100%;
                    border: 0.0595vw solid #C4C4C4;
                    background: white;
                    color: #1A1A1A;
                    font-size: 0.8333vw;
                    display: inline-flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                }
                .likes-button:hover,.likes-button-active{
                    color: #004578;
                }
                .likes-button:before {
                    content: '\e64a';
                    font-family: "iconfont";
                    font-size: 1.9048vw;
                    margin-bottom: 0.3571vw;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;
                }
                .likes-form .likes-button-active:before {
                    content: '\e63d';
                }
                .post-nav {
                    display: flex;
                    justify-content: space-between; 
                    margin-bottom: 4.5238vw;           
                }
                .post-nav .nav-previous a,.post-nav .nav-next a {
                    color: #c5c5c5;
                    font-size: 1.0714vw;
                    text-decoration: none;
                    font-weight: bold;
                    display: inline-flex;
                }
                .post-nav a.post-nav-link-active {
                    color: black;
                }
                .post-nav a.post-nav-link-active:hover {
                    color: #004578;
                }
                .post-nav .nav-previous a:before {
                    content: '\e640';
                    font-family: "iconfont";
                    font-size: 1.5476vw;
                    margin-right: 0.875vw;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;         
                }
                .post-nav .nav-next a:after {
                    content: '\e649';
                    font-family: "iconfont";
                    font-size: 1.5476vw;
                    margin-left: 0.875vw;
                    -webkit-font-smoothing: antialiased;
                    -moz-osx-font-smoothing: grayscale;         
                }
                .social-share {
                    display: flex;
                    max-width: 100%;
                }
                .social-share-box {
                    width: 2.9762vw;
                    height: 2.9762vw;
                    margin-right: 1.7857vw;
                }
                amp-social-share.rounded {
                    display: flex;
                    border-radius: 50%;
                    background-size: 60%;
                    color: #fff;
                    background-color: black;
                }
                amp-social-share.rounded:hover {
                    background-color: #004578;
                }
                .post-tags {
                    display: flex;
                    margin-top: 1.9644vw;
                flex-wrap: wrap;
                }
                .post-tags a{
                    display: inline-flex;
                    background: #F2F2F2;
                    padding-left: 1.3393vw;
                    padding-right: 1.3393vw;
                    padding-top: 0.6548vw;
                    padding-bottom: 0.6548vw;
                    margin-right: 0.3571vw;
                margin-bottom: 0.3571vw;
                    color: #666666;
                    font-size: 0.8333vw;
                    line-height: 0.8333vw;
                    text-decoration: none;
                    text-transform: uppercase;
                }
                #comments {
                    margin-top: 4.7619vw;
                }
                .comments>h2 {
                    text-align: center;
                    margin-bottom: 3.5714vw;
                    font-size: 1.0714vw;
                    line-height: 1.0714vw;
                    text-transform: uppercase;
                }
                .comments>ul {
                    list-style: none;
                    padding-left: 0.9524vw;
                    margin-top: 0;
                    margin-bottom: 1.7857vw;
                }
                .comments>ul .comment-author .avatar {
                    border-radius: 100%;
                    width: 4.7619vw;
                    height: 4.7619vw;
                    position: absolute;
                    left: 0.9524vw;
                }
                .comments>ul cite.fn a {
                    font-weight: bold;
                    font-size: 1.0714vw;
                    color: black;
                    font-style: normal;
                }
                .comments>ul span.says {
                    display: none;
                }
                .comments>ul cite.fn {
                    font-weight: bold;
                    font-style: normal;
                }
                .comments>ul .comment-meta a:first-child{
                    color: #B5B5B5;
                    font-size: 0.9524vw;
                    line-height: 0.9524vw;
                    font-style: italic;
                }
                .comments>ul .comment-meta {
                    margin-bottom: 1.9048vw;
                }
                .comments>ul .comment-body {
                    position: relative;
                    padding-left: 7.7381vw;
                    padding-bottom: 0.5952vw;
                    padding-top: 2.381vw;
                    
                }
                #comments>ul>li.comment ul {
                    list-style: none;
                }
                #comments>ul>li.comment ul .comment-body:before {
                    content: ' ';
                    height: 2.9762vw;
                    width: 0.2381vw;
                    background: #EEEEEE;
                    display: flex;
                    position: absolute;
                    left: -0.5952vw;
                    top: 3.2738vw;
                }
                #comments>ul>li.comment {
                    border-bottom: 0.0595vw solid #E6E6E6;
                }
                #comments>ul>li.comment:last-child {
                    border-bottom: none;
                }
                .comments>ul .comment-body .reply {
                    text-transform: uppercase;
                    position: absolute;
                    right: 0;
                    top: 2.381vw;
                    font-size: 1.0714vw;
                }
                .comment-respond .comment-reply-title{
                    font-size: 1.0714vw;
                    text-transform: uppercase;
                }
                .comment-respond .comment-reply-title>small {
                    text-transform: uppercase;
                    float: right
                }
                .comment-form {
                    font-size: 0;  /* css hack for fix blank position */
                }
                .comment-form>.logged-in-as a:first-child {
                    color: #666666;
                }
                .comment-form>.logged-in-as {
                    margin-bottom: 1.7857vw;
                }
                .comment-form>.form-submit {
                    margin-bottom: 4.7619vw
                }
                .comment-form .comment-error {
                    color: red;
                    font-size: 1.0714vw;
                    margin-bottom: 0.2976vw;
                }
                .comment-form-comment .comment-content {
                    width: 48.2143vw;
                    height: 11.9048vw;
                    resize: none;
                    border: 0.0595vw #E6E6E6 solid;
                    padding: 1.1905vw 1.3095vw 1.1905vw 1.3095vw;
                    font-size: 1.0952vw;
                    line-height: 1.0952vw;
                    box-sizing: border-box;
                }
                .comment-form-comment .comment-content::placeholder {
                    font-size: 1.0952vw;
                    line-height: 1.0952vw;
                }
                .comment-form>.form-submit>.submit {
                    border: 0.0595vw solid #004578;
                    text-transform: uppercase;
                    color: #004578;
                    font-size: 1.0952vw;
                    line-height: 1.0952vw;
                    background: white;
                    box-sizing: border-box;
                    padding: 0.9644vw 1.5059vw 0.9644vw 1.5059vw;
                    cursor: pointer;
                }
                .comment-form>.form-submit>.submit:hover {
                    background: #004578;
                    color: white; 
                }
                .comment-form-author {
                    margin-right: 1.3095vw;
                }
                .comment-form-author,
                .comment-form-email,
                .comment-form-url
                {
                    display: inline-flex;
                }
                .comment-form-author input,
                .comment-form-email input,
                .comment-form-url input
                {
                    width: 23.4524vw;
                    height: 3.4524vw;
                    border: 0.0595vw solid #E6E6E6;
                    padding:  1.369vw;
                    font-size: 0.9524vw;
                    line-height: 0.9524vw;
                    color: #333333;
                    box-sizing: border-box;
                }
                .comment-form-url input {
                    width: 48.2143vw;
                }
                #wp-comment-cookies-consent {
                    width: 1.0714vw;
                    height: 1.0714vw;
                    margin: 0;
                    vertical-align: middle;
                    margin-right: 0.2976vw;
                } 
                .comment-form-cookies-consent>label {
                    color: #B5B5B5;
                    font-size: 0.9524vw;
                    line-height: 0.9524vw;
                }
                @media only screen and (max-width: 640px){
                    .likes-form {
                        margin-bottom: 8vw;
                    }
                    .article-info .post-meta-box a.edit-link:before {
                        margin-right: 3.2133vw;
                        width: 0.1333vw;
                        height: 1.68vw;
                    }
                    h2.article-title {
                        margin-top: 5.3333vw;
                        font-size: 5.0667vw;
                        line-height: 6.9334vw;
                        margin-bottom: 5.3333vw;
                    }
                    .article-info .post-meta-box {
                        margin-bottom: 0;
                    }
                    .content blockquote {
                        margin-top: 6.4666vw;
                        margin-bottom: 6.4666vw;
                        padding-left: 8vw;   
                    }
                    .content blockquote:before {
                        font-size: 4.7201vw;
                        margin-right: 3.7333vw;
                    }
                    .content blockquote p {
                        font-size: 4vw;
                        line-height: 5.6vw;
                    }
                    .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
                        margin-top: 5.3333vw;
                        margin-bottom: 5.3333vw;
                    }
                    .content h1 {
                        font-size: 5.6vw;
                    }
                    .content h2 {
                        font-size: 5.3333vw;
                    }  
                    .content h3 {
                        font-size: 5.0667vw;
                    } 
                    .content h4 {
                        font-size: 4.8vw;
                    } 
                    .content h5 {
                        font-size: 4.5333vw;
                    } 
                    .content h6 {
                        font-size: 4.2667vw;
                    } 
                    .content p {
                        margin-top: 4.5333vw;
                        margin-bottom: 4.5333vw;
                        font-size: 4vw;
                        line-height: 5.8667vw;
                    }
                    .content ul, .content ol {
                        padding-left: 3.3333vw;
                        font-size: 4vw;
                        line-height: 5.8667vw;  
                        margin-top: 5.3333vw;    
                        margin-bottom: 5.3333vw;    
                    }
                    .content figcaption {
                        font-size: 3.2vw;
                        margin-top: 0.6666vw;
                    }
                    .content>figure {
                        margin: 4.5333vw 0 4.5333vw 0;
                    }
                    .wp-block-cover-image, .wp-block-cover {
                        min-height: 50vw;
                        margin: 4.5333vw 0 4.5333vw 0;
                    }
                    .wp-block-gallery ul>li {
                        margin-bottom: 2.1333vw;
                    }
                    .content .wp-block-code {
                        padding: 2.1333vw;
                        font-size: 3.3vw;
                        line-height: 4.2667vw; 
                    }
                    .wp-block-table table {
                        font-size: 3.4667vw;
                    }
                    .wp-block-file {
                        padding-left: 3.4667vw;
                        padding-right: 2.6667vw;
                        padding-top: 1.3333vw;
                        padding-bottom: 1.3333vw;
                        margin: 4.5333vw 0 4.5333vw 0;
                        font-size: 3.4667vw;
                        line-height: 5.3333vw;
                    }
                    .wp-block-file a:last-child, a.wp-block-file__button {
                        padding: 1.6vw 3.2vw 1.6vw 3.2vw;
                        border: 0.1333vw #004578 solid;
                        line-height: 2.1333vw;
                    }
                    .wp-block-file a:last-child:after, a.wp-block-file__button:after {
                        font-size: 2.6667vw;
                        margin-left: 2.4vw;
                    }
                    
                    .nav-links {
                        margin-top: 4.5333vw;
                        margin-bottom: 4.5333vw;
                    }
                    .wp-block-button {
                        margin: 4.5333vw 0 4.5333vw 0;
                    }
                    .likes-button {
                        width: 16vw;
                        height: 16vw;
                        border: 0.1333vw solid #C4C4C4;
                        font-size: 2.6667vw;
                        margin-top: 2.6667vw;
                    }
                    .likes-button:before {
                        font-size: 5.6vw;
                        margin-bottom: 1.8667vw;
                    }
                    .post-nav {
                        margin-bottom: 12.6667vw;           
                    }
                    .post-nav .nav-previous a, .post-nav .nav-next a {
                        font-size: 3.7333vw;
                    }
                    .social-share-box {
                        width: 6.6667vw;
                        height: 6.6667vw;
                        margin-right: 4vw;
                    }
                    .post-tags {
                        margin-top: 8.8vw;;
                    }
                    .post-tags a{
                        padding-left: 3.5333vw;
                        padding-right: 3.5333vw;
                        padding-top: 1.7333vw;
                        padding-bottom: 1.7333vw;
                        margin-right: 1.3333vw;
                        font-size: 2.2vw;
                        line-height: 2.2vw;
                    }
                    .comments>ul .comment-author .avatar {
                        width: 10.6667vw;
                        height: 10.6667vw;
                        left: 0;
                    }
                    #comments>ul {
                        padding-left: 0;
                    }
                    .comments>ul .comment-body {
                        padding-left: 15.7067vw;
                        padding-bottom: 1.8667vw;
                        padding-top: 5.3333vw;         
                    }
                    .comments>ul cite.fn a {
                        font-size: 3.7333vw;
                    }
                    .comments>ul .comment-meta a:first-child {
                        font-size: 3.2vw;
                        line-height: 3.2vw;
                    }
                    .comments>ul .comment-body .reply {
                        font-size: 3.7333vw;
                        top: 5.3333vw;       
                    }
                    .comments>h2,.comment-respond .comment-reply-title {
                        font-size: 3.7333vw;
                    }
                    .comment-form-comment .comment-content {
                        width: 92vw;
                        height: 26.6667vw;
                        border: 0.1333vw #E6E6E6 solid;
                        padding: 4vw 3.3333vw 4vw 3.3333vw;
                        font-size: 3.4667vw;
                        line-height: 3.4667vw;     
                    }
                    .comment-form-comment .comment-content::placeholder {
                        font-size: 3.4667vw;
                        line-height: 3.4667vw;   
                    }
                    .comment-form>.form-submit>.submit {
                        border: 0.1333vw solid #004578;
                        font-size: 3.2vw;
                        line-height: 3.2vw;
                        padding: 2.8133vw 4.4vw 2.8133vw 4.4vw;
                        cursor: pointer;
                    }
                    .comment-form .comment-error {
                        font-size: 3.4667vw;
                    }
                    #comments>ul>li.comment {
                        border-bottom: 0.1333vw solid #E6E6E6;
                    }
                    .comment-form-author input, .comment-form-email input, .comment-form-url input {
                        width: 92vw;
                        height: 10.6667vw;
                        border: 0.1333vw solid #E6E6E6;
                        padding: 2.5333vw;
                        font-size: 3.4667vw;
                        line-height: 3.4667vw;
                    }
                    #wp-comment-cookies-consent {
                        width: 5.3333vw;
                        height: 5.3333vw;
                        margin-right: 1.3333vw;
                    }
                    .comment-form-cookies-consent>label {
                        font-size: 3.2vw;
                        line-height: 4.8vw;
                    }
                    .comment-form-cookies-consent {
                        display: flex;
                    }
                    .post-nav .nav-previous a:before {
                        font-size: 5.3333vw;
                        margin-right: 2.8vw;         
                    }
                    .post-nav .nav-next a:after {
                        font-size: 5.3333vw; 
                        margin-left: 2.8vw;        
                    }
                    hr {
                        height: 0.1333vw;
                        margin-top: 5.3333vw;
                        margin-bottom: 5.3333vw;
                    }
                    .post-password-form>p>label>input {
                        margin-left: 2.0001vw;
                        margin-right: 1.8667vw;
                        width: 42.6667vw;
                        height: 5.3333vw;
                        border-radius: 0.5333vw;
                        border: 0.1334vw #E6E6E6 solid;
                        padding-left: 2.6667vw;
                        padding-right: 2.6667vw;
                    } 
                
                    .post-password-form>p>input {
                        font-size: 2.1333vw;
                        border-radius: 0.5333vw;
                        padding: 1.8934vw 2.5334vw 1.8934vw 2.5334vw;
                    }
                    #comments>ul>li.comment ul .comment-body:before {
                        height: 6.6667vw;
                        width: 0.5333vw;
                        left: -3.3333vw;
                        top: 7.3334vw;
                    }
                    #comments {
                        margin-top: 12vw;
                    }
                    .wp-block-table table td {
                        border: 0.2667vw #cccccc solid;
                        padding: 1.0667vw;
                    }
                    .wp-block-gallery ul li figure>figcaption {
                        font-size: 1.7333vw;
                        line-height: 2.9333vw;
                    }
                }
                pre, code {
                font-family: "Lucida Console", Monaco, monospace;
                font-size: 12pt;
                background-color: #F1F1F1;
                    padding: .5em;
                }
                code {
                    padding: 0.1em;
                }
                :root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-681d4ff{text-align:center;margin-top:.5vw}
            </style>
    


<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<link rel="canonical" href="http://blog.zerokirin.online/post/yi-ci-wan-zheng-de-qing-qiu-ji-gai-jin/" />
<link rel="shortcut icon" href="http://blog.zerokirin.online/favicon.ico?v=1620407303045">

<meta name="author" content="破庙主任">

<meta itemprop="name" content="一次完整的请求及改进 | Zer0kiriN">
<meta itemprop="description" content="准备阶段
当你通过网线或者是WIFI连接到宿舍路由器时，无论进行何种访问，首当其冲的都是要清楚的知道自己所处的网络位置，因此需要初始化IP地址，默认网关，子网掩码，这决定了最基础的，你在当前局域网内的网络位置
DHCP
发现服务

笔记本A...">
<meta itemprop="image" content="">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="一次完整的请求及改进 | Zer0kiriN">
<meta name="twitter:description" content="准备阶段
当你通过网线或者是WIFI连接到宿舍路由器时，无论进行何种访问，首当其冲的都是要清楚的知道自己所处的网络位置，因此需要初始化IP地址，默认网关，子网掩码，这决定了最基础的，你在当前局域网内的网络位置
DHCP
发现服务

笔记本A...">
<meta name="twitter:image" content="" />
<meta name="twitter:image:alt" content="一次完整的请求及改进 | Zer0kiriN" />


<meta property="og:type" content="website">
<meta property="og:url" content="http://blog.zerokirin.online/post/yi-ci-wan-zheng-de-qing-qiu-ji-gai-jin/">
<meta property="og:title" content="一次完整的请求及改进 | Zer0kiriN">
<meta property="og:description" content="准备阶段
当你通过网线或者是WIFI连接到宿舍路由器时，无论进行何种访问，首当其冲的都是要清楚的知道自己所处的网络位置，因此需要初始化IP地址，默认网关，子网掩码，这决定了最基础的，你在当前局域网内的网络位置
DHCP
发现服务

笔记本A...">
<meta property="og:image" content="">
<meta property="og:image:alt" content="一次完整的请求及改进 | Zer0kiriN" />
<meta property="og:site_name" content="Zer0kiriN">
<meta property="og:locale" content="zh_CN">
<meta property="tag" content="一次完整的请求及改进 | Zer0kiriN" />


<script type="application/ld+json">
  {
"@context": "https://schema.org",
"@type": "BlogPosting",
"mainEntityOfPage": {
  "@type": "WebPage",
  "@id": "http://blog.zerokirin.online/post/yi-ci-wan-zheng-de-qing-qiu-ji-gai-jin/"
},
"headline": "一次完整的请求及改进 | Zer0kiriN",
"datePublished": "Fri Apr 16 2021 19:48:55 GMT+0800",
"dateModified": "Fri Apr 16 2021 19:48:55 GMT+0800",
"author": {
  "@type": "Person",
  "name": "破庙主任"
},
"publisher": {
  "@type": "Organization",
  "name": "破庙主任",
  "logo": {
    "@type": "ImageObject",
    "url": "http://blog.zerokirin.online/favicon.ico"
  }
},
"image": [
""
],
"description": "准备阶段
当你通过网线或者是WIFI连接到宿舍路由器时，无论进行何种访问，首当其冲的都是要清楚的知道自己所处的网络位置，因此需要初始化IP地址，默认网关，子网掩码，这决定了最基础的，你在当前局域网内的网络位置
DHCP
发现服务

笔记本A..."
 }

</script>
<script type="application/ld+json">
  {
    "@context": "https://schema.org/", 
    "@type": "BreadcrumbList", 
    "itemListElement": [{
      "@type": "ListItem", 
      "position": 1, 
      "name": "Home",
      "item": "http://blog.zerokirin.online"  
    },{
      "@type": "ListItem", 
      "position": 2, 
      "name": "一次完整的请求及改进 | Zer0kiriN",
      "item": "http://blog.zerokirin.online/post/yi-ci-wan-zheng-de-qing-qiu-ji-gai-jin/"  
    }]
  }
  </script>







<script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
<script async custom-element="amp-video" src="https://cdn.ampproject.org/v0/amp-video-0.1.js"></script>
<script async custom-element="amp-audio" src="https://cdn.ampproject.org/v0/amp-audio-0.1.js"></script>


<script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>



<script async custom-element="amp-gist" src="https://cdn.ampproject.org/v0/amp-gist-0.1.js"></script>

<link rel="alternate" type="application/atom+xml" title="一次完整的请求及改进 | Zer0kiriN - Atom Feed" href="http://blog.zerokirin.online/atom.xml">



  



  


</head>

<body>
  <input type="checkbox" id="header-menu-button">
  <header id="commonTop">
  <div class="top-container">
    <div class="title-menus-area">
      <a class="blog-title" href="http://blog.zerokirin.online">Zer0kiriN</a>
      <label for="header-menu-button" class="top-menus">
        <nav class="menu-menu-1-container">
          <ul id="menu-menu-1" class="menu">
            
            
            <li>
              <a href="/" aria-current="page">首页</a></li>
            
            
            
            <li>
              <a href="/archives" aria-current="page">归档</a></li>
            
            
            
            <li>
              <a href="/post/about" aria-current="page">关于</a></li>
            
            
            
            <li>
              <a href="http://blog.zerokirin.online/post/every-day" aria-current="page">Every Day</a></li>
            
            
          </ul>
        </nav>
      </label>
    </div>
    
  </div>
</header>
  <main>
    <div class="main-container">

      <div class="article-info">
        
          <div class="flex-box meta-category">
            <a class="post-cate" href="http://blog.zerokirin.online/tag/qzFUt7Z9q/">应用层</a></div>
          
        <h2 class="article-title">
          <a href="http://blog.zerokirin.online/post/yi-ci-wan-zheng-de-qing-qiu-ji-gai-jin/">一次完整的请求及改进</a>
        </h2>
        <div class="flex-box">
          <div class="flex-box post-meta-box">
            <a class="post-meta" href="http://blog.zerokirin.online"><span
                class="iconfont icon-mr-postmeta"></span>破庙主任</a>
            <span class="post-meta"><span class="iconfont icon-mr-postmeta"></span>2021 年 04	月 16日</span>
            


          </div>
        </div>
      </div>
      <div class="content">
        <h2 id="准备阶段">准备阶段</h2>
<p>当你通过网线或者是WIFI连接到宿舍路由器时，无论进行何种访问，首当其冲的都是要清楚的知道自己所处的网络位置，因此需要初始化<strong>IP地址，默认网关，子网掩码</strong>，这决定了最基础的，你在当前局域网内的网络位置</p>
<h3 id="dhcp">DHCP</h3>
<h4 id="发现服务">发现服务</h4>
<ol>
<li><strong>笔记本A</strong>的操作系统首先生成一个<strong>DHCP发现报文</strong></li>
<li>放入一个UDP报文，目的端口67（DHCP服务器），源端口68（DHCP客户端）</li>
<li>UDP报文被放入一个IP数据报，目的IP地址为<code>255.255.255.255</code>（广播地址），源IP地址为<code>0.0.0.0</code>，因为此时A还没有有效的IP地址，所以才要获取呀</li>
<li>IP数据报被放入一个以太网帧，该帧的目的地址是<code>FF:FF:FF:FF:FF:FF</code>（广播地址），源地址是A自己的MAC地址，该帧会被广播到所有与交换机（在这里也就是寝室路由器，它充当了交换机的功能）相连的所有设备</li>
<li>这个以太网帧是第一个由A发送到交换机的帧，该交换机将在所有的出端口把此帧广播出去，包括路由器（寝室路由器的另一个功能）连接的端口</li>
<li>路由器收到该广播帧后进行解析，抽出IP数据报，一看目的地址是广播地址，因此进行处理，根据IP报头中的信息确定是UDP协议，然后抽出UDP，根据UDP端口67到达DHCP服务器，DHCP解析得到<strong>DHCP发现报文</strong></li>
</ol>
<h4 id="服务提供">服务提供</h4>
<p>由于一个局域网下可能会有多个路由器，也会有多个提供DHCP服务的服务器，因此不能直接选定，需要由客户机自己选择DHCP服务器，因此返回的<strong>服务提供报文</strong>的</p>
<ul>
<li>目的地址是广播地址</li>
<li>源地址是自身IP地址</li>
<li>还有DHCP服务号，用于最终选择哪个DHCP服务器</li>
<li>yiaddr（你的IP地址），指最终分给客户端的IP地址</li>
<li>其他若干信息，包括租期时间等等</li>
</ul>
<h4 id="发起请求">发起请求</h4>
<ol>
<li>A生成一个<strong>DHCP请求报文</strong></li>
<li>目的端口67，源端口68</li>
<li>目的IP地址依然是广播地址，源地址是<code>0.0.0.0</code></li>
<li>以太网帧的目的地址依然是广播地址，源地址是A自己的MAC地址</li>
<li>以太网帧通过交换机广播到所有设备上</li>
<li>路由器收到广播后解析，最终得到<strong>DHCP请求报文</strong></li>
</ol>
<p>以上和发现步骤相同，不同的是<strong>DHCP请求报文</strong>多带了一个DHCP服务号，这样即使由多个DHCP服务器，依然能确定选择哪个获取IP地址</p>
<ol start="7">
<li>对应的DHCP服务器将原来已经预分配的yiaddr作为IP地址，将<strong>IP地址，子网掩码，默认网关路由器，DNS服务器</strong>封装为一个DHCP ACK报文</li>
</ol>
<h4 id="处理返回">处理返回</h4>
<p>和服务提供步骤相同，不一样的是<strong>服务提供报文</strong>没有子网掩码等，</p>
<ol>
<li>将<strong>DHCP ACK报文</strong>封装进UDP，目的端口是68（客户端）</li>
<li>放入IP数据报，和服务提供步骤一样，源IP地址是自身IP地址，目的地址是广播地址</li>
<li>最后放入一个以太网帧，源地址是路由器MAC，目的地址是电脑A</li>
<li>由于交换机有自学习能力，在发现服务的时候就已经知道对应的MAC地址怎么转发了</li>
<li>返回到A，A记录并更新自己的状态</li>
</ol>
<p>到这里一个设备已经完整的加入到我们的局域网了</p>
<h2 id="dns和arp">DNS和ARP</h2>
<p>踏出请求的第一步就是获取对应的IP地址，这就是DNS查询</p>
<ol>
<li>
<p>将<code>google.com</code>放入一个UDP报文，目的端口53，源端口就是大于1024的随机一个</p>
</li>
<li>
<p>包装到IP报文中，目的地址是<strong>DNS服务器的IP地址</strong>，源地址就是自身的IP地址</p>
</li>
<li>
<p>由于路由表上没有直接对DNS服务的记录，因此会转发到默认网关路由器上</p>
<p>然而A只是知道了默认网关的IP地址，但以太网帧又不知道转到哪，这就需要ARP协议</p>
<ol>
<li>A生成一个具有目的IP地址（默认网关）的<strong>ARP查询报文</strong></li>
<li>把报文放到一个以太网帧中，该帧的目的地址是广播地址，把帧发送给交换机，交换机（一般情况下是路由器的交换部分）将转发给所有设备</li>
<li>每个设备都会解析报文，如果目的地址和自己的地址符合，就准备一个<strong>ARP回答报文</strong>，包括自己的IP地址和MAC地址</li>
<li>放到以太网帧中，目的地址是A的地址，通过交换机发送给A</li>
<li>A收到<strong>回答报文</strong>后将IP地址和MAC地址保存到ARP表中，下次直接调用就好</li>
</ol>
<p>这样就有了默认网关的MAC地址</p>
</li>
<li>
<p>将IP报文包装到以太网帧中，目标地址是<strong>默认网关的MAC</strong>，经过交换机转发给默认网关</p>
</li>
<li>
<p>默认网关根据自身的路由表选择将报文转发给下一跳路由器，同时<strong>更新目的地址</strong>，源地址保持不变，最终<strong>目的地址应该就是DNS服务器的MAC地址</strong>，路由表的更新由RIP，OSPF等域内协议以及域间协议BGP维护</p>
</li>
<li>
<p>经过重重转发到了DNS服务器，服务器收到查询报文后找到对应的IP地址，生成一个包括IP地址和<code>google.com</code>的UDP报文</p>
</li>
<li>
<p>然后就是放入IP报文和以太网帧，一路转发回到最初的起点A</p>
</li>
</ol>
<p>至此A终于知道了IP地址开始正式的访问</p>
<h2 id="tcp和https">TCP和HTTPS</h2>
<h3 id="建立http连接">建立HTTP连接</h3>
<h4 id="tcp三次握手">TCP三次握手</h4>
<ol>
<li>A生成一个TCP请求报文，四元组（源地址，目的地址，源端口号，目的端口号）填写好，FLAG为SYN</li>
<li>通过中间的路由器和交换机不断地转发到达目的地，然后被解析，服务端生成一个TCP报文，FLAG为SYN ACK</li>
<li>A收到报文后就已经进入连接状态了，对于A来说已经建立连接完成了，下一步就是发送数据，但对于服务端来说还处于同步等待状态，不过它会在下一次收到ACK报文的时候进入连接状态，这个报文可能是已经带有数据的</li>
</ol>
<p>至此，几乎所有准备工作都已经做完了，终于可以开始请求网页了。</p>
<h4 id="http请求">HTTP请求</h4>
<h5 id="请求报文">请求报文</h5>
<figure data-type="image" tabindex="1"><img src="https://www.runoob.com/wp-content/uploads/2013/11/2012072810301161.png" alt="img" loading="lazy"></figure>
<ul>
<li>请求行 回车符和换行符就是<CR><LF></li>
<li>请求头 除了Host外都是可选的</li>
<li>空行 除了回车符和换行符以外无其他空格</li>
<li>数据</li>
</ul>
<pre><code class="language-http">GET / HTTP/1.1
Host: www.google.com
（注意这里是个空行）
</code></pre>
<p>将报文放入一个TCP报文，然后依据建立好的TCP连接发送出去</p>
<h5 id="响应报文">响应报文</h5>
<p><code>google.coom</code>服务器收到80端口的请求，生成响应报文，将请求的web页面内容放入响应体。</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdn.net/20131107163544468" alt="img" loading="lazy"></figure>
<ul>
<li>状态行 请求成功的状态码就是200，描述 ok</li>
<li>响应头</li>
<li>空行</li>
<li>响应数据，正文部分</li>
</ul>
<pre><code class="language-http">HTTP/1.1 200 OK
Content-Length: 3059
Server: GWS/2.0
Date: Sat, 11 Jan 2003 02:44:04 GMT
Content-Type: text/html
Cache-control: private
Set-Cookie: PREF=ID=73d4aef52e57bae9:TM=1042253044:LM=1042253044:S=SMCc_HRPCQiqy
X9j; expires=Sun, 17-Jan-2038 19:14:07 GMT; path=/; domain=.google.com
Connection: keep-alive

&lt;html&gt;
Hello Google
&lt;/html&gt;
</code></pre>
<p>响应体经过路由器的重重转发，回到了A，A终于拿到了<code>google.com</code>的内容，浏览器将返回来的响应体进行渲染，渲染出了最终的页面。</p>
<h4 id="tcp四次挥手">TCP四次挥手</h4>
<p>连接完成后，当A已经不需要继续请求的时候就会开始回收步骤，结束连接</p>
<ol>
<li>A发送FIN</li>
<li>服务器收到FIN，返回ACK，此时A已经不能向服务器发送消息了，服务器将继续把没发完的发掉</li>
<li>服务器数据发送完毕后，发送FIN</li>
<li>A收到后返回ACK，等待2MSL后如果没收到服务器的消息则释放连接资源，此次链接结束</li>
<li>服务器收到ACK，确定A已经关闭，中断连接</li>
</ol>
<p>至此，从插入网线开始，一次完整的HTTP请求就结束了</p>
<h3 id="http的改进">HTTP的改进</h3>
<h4 id="http11">HTTP/1.1</h4>
<p>上面讲述的是一次完整的HTTP/1.1请求，它相比1.0改进了几个部分</p>
<ol>
<li>长连接，增加了connection报头，通过设置<code>Keep-Alive</code>可以保持HTTP连接不断开，避免了每次请求结束后都要重复释放，重复建立，提高了效率，当客户端像关闭HTTP连接的时候可以再请求头中携带<code>Connction: false</code>来告知服务器关闭请求。</li>
<li>增加了Host请求头，有时候同一个IP地址上会有不同的主机和或网站，因此可以通过携带不同的Host请求头来区分请求的主机。</li>
<li>身份认证，状态管理和缓存机制</li>
<li>断点续传，通过增加range头，请求资源的一部分，响应206</li>
</ol>
<h4 id="http20">HTTP/2.0</h4>
<p>由于1.x版本都是基于文字的，健壮性和性能都受到了挑战，而且长连接并没有解决TCP阻塞问题，于是有了2.0。</p>
<ol>
<li>头部压缩 2.0版本是基于二进制的，类似于TCP报头一样，规定好了位数，这样只需要在服务端和客户端同时维护一份静态的数据字典，用来确定请求头，省去了大部分重复字段</li>
<li>服务端推送，在1.x时代，当网页同时包含了<code>style.css</code>和<code>style.js</code>时，会再重复两次请求去获取两个文件，但是2.0中，服务端可以主动推送相关文件，客户端需要获取的时候就无需重复请求了</li>
<li>引入了帧和流的概念，实现了多路复用，抽象一点理解：
<ol>
<li>每一个帧可看做是一个学生，流可以认为是组（流标识符为帧的属性值），一个班级（一个连接）内学生被分为若干个小组，每一个小组分配不同的具体任务。</li>
<li>HTTP/1.* 一次请求-响应，建立一个连接，用完关闭；每一个小组任务都需要建立一个班级，多个小组任务多个班级，1:1比例</li>
<li>HTTP/1.1 Pipeling解决方式为，若干个小组任务排队串行化单线程处理，后面小组任务等待前面小组任务完成才能获得执行机会，一旦有任务处理超时等，后续任务只能被阻塞，毫无办法，也就是人们常说的线头阻塞，因此并未实际使用</li>
<li>HTTP/2多个小组任务可同时并行（严格意义上是并发）在班级内执行。一旦某个小组任务耗时严重，但不会影响到其它小组任务正常执行</li>
<li>这样自始至终就只有一个TCP连接，控制权完全在HTTP手中，而且也能最大化利用每个TCP连接可以传输的带宽</li>
</ol>
</li>
</ol>
<p>HTTP2.0对以前的1.x版本也提供了兼容，只需要经过一个二进制分帧层就可以将文本信息转化为对应的二进制头</p>
<h4 id="https">HTTPS</h4>
<p>不管http怎么改进，他始终是明文加密的一种传输方式，因此提出了加密方案——SSL协议，TCP/IP四层协议模型中应该是处于应用层，在OSI七层模型中可以算会话层</p>
<p>SSL的1.0版本有重大的安全缺陷，因此从未公开过，到3.0版本已经证明是成熟的方案了，于是在1999年，SSL3.0被更名成了TLS（传输层安全），TLS1.0实际上就是SSL3.1，这样，当HTTP经过了SSL/TLS协议加密后再传输的方式就被称为HTTPS</p>
<p>注：很多教程里说HTTP2.0要求强制使用HTTPS，其实这并不是2.0的要求，它只是规定了HTTP的协议，真正要求HTTPS的是浏览器</p>
<p>至此，我们的这次请求就由HTTP1.1更换为了HTTPS2.0</p>
<p>对于TLS的详解，请见下章</p>

      </div>

      
      <nav class="post-nav">
        
        <div class="nav-previous">
          <a class="post-nav-link-active" title="Golang基础语法题" href="http://blog.zerokirin.online/post/golang-ji-chu-yu-fa-ti/">上一篇文章</a>
        </div>
        
        
        <div class="nav-next">
          <a class="post-nav-link-active" title="传输层" href="http://blog.zerokirin.online/post/chuan-shu-ceng/">下一篇文章</a>
          

        </div>
      </nav>
      

      
      <div class="social-share">
  <div class="social-share-box">
    <amp-social-share class="rounded" type="email" layout="responsive" width="20" height="20"></amp-social-share>
  </div>
  <div class="social-share-box">
    <amp-social-share class="rounded" type="linkedin" layout="responsive" width="20" height="20">
    </amp-social-share>
  </div>
  <div class="social-share-box">
    <amp-social-share class="rounded" type="pinterest" layout="responsive"
      data-param-media="https://amp.dev/static/samples/img/amp.jpg" width="20" height="20"></amp-social-share>
  </div>
  <div class="social-share-box">
    <amp-social-share class="rounded" type="tumblr" layout="responsive" width="20" height="20"></amp-social-share>
  </div>
  <div class="social-share-box">
    <amp-social-share class="rounded" type="twitter" layout="responsive" width="20" height="20">
    </amp-social-share>
  </div>
  <div class="social-share-box">
    <amp-social-share class="rounded" type="whatsapp" layout="responsive" width="20" height="20">
    </amp-social-share>
  </div>
  <div class="social-share-box">
    <amp-social-share class="rounded" type="line" layout="responsive" width="20" height="20"></amp-social-share>
  </div>
</div>
      
      

      <div class="post-tags">
        
        <a href="http://blog.zerokirin.online/tag/qzFUt7Z9q/" rel="tag">应用层</a>        
        
        <a href="http://blog.zerokirin.online/tag/sfbQ61MwD9/" rel="tag">HTTPS</a>        
        
        <a href="http://blog.zerokirin.online/tag/3r2C_nCspS/" rel="tag">HTTP2.0</a>        
        
        <a href="http://blog.zerokirin.online/tag/4qrh5mF4T5/" rel="tag">计算机网络</a>        
               
      </div>


        

    </div>

    <div class="sidebar">
  <aside id="profile-2" class="widget widget_profile">
    <div class="profile-box">
      <div class="profile-avatar">
        <amp-img src="http://blog.zerokirin.online/images/avatar.png?v=1620407303045" alt="avatar"
          layout="fill"></amp-img>
      </div>
      <div class="profile-content">
        <div class="amp-wp-681d4ff">
          记录
        </div>

      </div>
    </div>
  </aside>
  
    <aside id="search-10" class="widget widget_search">
      <form target="_top" role="search" method=get class="search-form" action="https://www.google.com/search">
        <input type=hidden name=domains value="http://blog.zerokirin.online">
        <input type=hidden name=sitesearch value="http://blog.zerokirin.online">
        <input name="hl" value="zh-CN" type="hidden">
        <input required type="text" class="search-field" placeholder="搜索…" name="q">
        <button type="submit"
          class="search-submit"></button>
      </form>
    </aside>
    
    
      <aside id="recent-posts-2" class="widget widget_recent_entries">
        <h4 class="widget-title">近期文章</h4>
         <ul>
          
            
          <li>
           <a href="http://blog.zerokirin.online/post/ru-he-zai-github-shang-kai-yuan-zi-ji-de-bao/" aria-current="page">如何在github上开源自己的包</a>
          </li>
          
          
            
          <li>
           <a href="http://blog.zerokirin.online/post/golang-yun-xing-shi-yi/" aria-current="page">Golang 运行时（一）</a>
          </li>
          
          
            
          <li>
           <a href="http://blog.zerokirin.online/post/golang-ji-chu-yu-fa-ti/" aria-current="page">Golang基础语法题</a>
          </li>
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
     </aside>
     
  
     
      <aside id="categories-2" class="widget widget_categories">
        <h4 class="widget-title">标签</h4>
        <ul>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/xeynZVmko/">
              go mod
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/3OGqShz15j/">
              go package
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/iBI9azZkgJ/">
              go stack
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/2n3c2auIY/">
              golang
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/FGxA9Oea-/">
              运行时
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/a80OXa5tzp/">
              变量逃逸
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/-Ep2xEDPKR/">
              笔记
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/qzFUt7Z9q/">
              应用层
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/sfbQ61MwD9/">
              HTTPS
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/3r2C_nCspS/">
              HTTP2.0
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/4qrh5mF4T5/">
              计算机网络
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/t3AfmBRjr/">
              传输层
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/00plriG5k/">
              网络层
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/OeNZRWzRL/">
              goroutine
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/nRa6ExP4g/">
              channel
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/EwjLvEpmk/">
              string
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/PM-CMPlRec/">
              rune
            </a>
            
              <li class="cat-item"><a href="http://blog.zerokirin.online/tag/i2Qk4pOuX/">
              map
            </a>
            
          </li>
    
        </ul>
      </aside>
      


  <aside id="linkcat-2" class="widget widget_links">
  <h4 class="widget-title">友链</h4>
  <ul class="xoxo blogroll">
    
      
    
  </ul>
</aside>


</div>
    <div class="scrolltop-wrap">
  <span tabindex="0" role="button" class="go-top" on="tap:commonTop.scrollTo(duration=500, position=top)">
    <span class="iconfont"></span>
  </span>
</div>
  </main>
  <footer>
  <div class="footer-container">
    <div class="footer-menus">
    </div>
    <div class="footer-copyright">
      
      
      <p>
        主题版本：1.3.0-beta.0；最新版本：<br><br><br><br>
        <a href="https://github.com/jiansing/gridea-theme-inlineamp/releases" rel="nofollow">
        <amp-img alt="InlineAMP release (latest by date)" src="https://img.shields.io/github/v/release/jiansing/gridea-theme-inlineamp" height="20" width="80"></amp-img></a>
      </p>
      
      

    </div>
  </div>
</footer>


  


</body>

</html>